enum SpriteKindLegacy {
    Player,
    Projectile,
    Food,
    Enemy
}
sprites.onOverlap(SpriteKind.Player, SpriteKind.Projectile, function (sprite, otherSprite) {
    game.over(false, effects.melt)
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Food, function (sprite, otherSprite) {
    music.jumpUp.play()
    pizzacount += 1
    info.changeScoreBy(1)
    if (pizzacount == 5) {
        level += 1
        newLevel()
    } else if (pizzacount < 5) {
        pizza.setPosition(randint(0, 120), randint(0, 100))
    }
})
function newLevel () {
    scene.setBackgroundColor(randint(1, 15))
    pizzacount = 0
    pizza.setPosition(randint(0, 120), randint(0, 100))
    Pirate.say("Level" + level, 1000)
    for (let index = 0; index < 2; index++) {
        music.playTone(262, music.beat(BeatFraction.Half))
        music.playTone(330, music.beat(BeatFraction.Half))
        music.playTone(392, music.beat(BeatFraction.Half))
    }
}
let randomcorner = 0
let projectile: Sprite = null
let pauselength = 0
let pizzacount = 0
let level = 0
let pizza: Sprite = null
let Pirate: Sprite = null
scene.setBackgroundImage(img`
    ..fffffffffff...................................................................................................................................................
    .f4ff4444444f...................................................................................................................................................
    .f4444...fff4.................................................................f222222f..........................................................................
    .f4f......ff4................................................................f422ffff2f.........................................................................
    .f4f.....fff4................................................................f42ffffff2.........................................................................
    .f4f.....fff4................................................................f42f...ff2.........................................................................
    .f4f.....fff4................................................................f42....ff2f........................................................................
    .f4f....fff4.ff4.............................................................f42....ff2f...............................fff......................................
    .f4f...fff44.fff.............................................................f42.....f2f......fff......................ff2......................................
    .f4ff.ffff4..fff.............................................................f2f.....f2f......fff......................ff2......................................
    .f4fffff44f..................................................................f2f.....f2f......fff......................ff2......................................
    ..4ffff44f...................................................................f2f.....f2f........2......................ff2222...................................
    ..4fff44f..fff.............ffffffffff444.........fffff44444f.................f2f.....2ff............................f22222fff...................................
    ..4444ff...4ff..ff444ff..f44444444444f.4......fffff4444fffff4................f2f....f2ff............................22fff2fff......................f22..........
    ..4ff......4ff..ffff44f..fffffffffffff.4.....fffff4fffffffff4................f2f...f22ff............................fffff2fff..................ffff22f..........
    ..4ff......4ff..ffffff44.ffff.....ffff4......ffff4f....ffff.4................f2ffff22fff........fff..f22222222.........ff2.....ffffff.........fffff2ff..........
    ..4ff......4ff......fff4.........ffff4.......ffff4....fffff.4................f2fff22fff....fff..fffff22ffff..22fff.....ff2....f222222f.......fffff22f...........
    ..4ff......4ff......ff44........fffff4.......ffff4fffffffff44................f2ff22ff......ff2..fffff2fffff..ffffff....ff2...ff2ffff2f.......fffff2.............
    ..4ff.....f4ff.....fff4........ffff44........fffff44444444444................f2f22.........ff2..fffff2fffff.fffffff....ff2..ff22ffff2f.......ffff2..............
    ..4ff.....f4ff.....ff44......fffff4....ffffffffffffffffffff.4................f22...........ff2..fffff2....ffffff22f....ff2..ff2f...f2f.......fff.2..............
    .f4ff.....f4f.....ff4ff.....ffffff4ffffffffff...........ffff4................f2f...........ff2..ff2..2....fffff2ff2f...ff2..ff2fff.22f......ffff.2..............
    .f4ff.....f4f....ff44ffffff.ffff44fff4444444f...........ffff4......ffff......f2f..........fff2..ff2.2....fffff2fff2f...ff2..ff222ff2ff......fffff2..............
    .f4ff.....f4f...ff44f444fff.fff4f4444ffff.fff...........ffff4......ffff......f2f..........fff2..ff2.2....fffff2fff2f...ff2..f22ff222ff......ffff2ffff...........
    .fff......f4f...f44444ff4ff.ff444ffff.....fff............fff4......ffff......f2f..........fff2..ff22.....fff.f2fff2ff..ff2..f2f.ffffff......ffff2fffff..........
    .fff......fff...f44ff........44.............................44.....fff.......f2f..........fff2..ff22.....fffff2fff2ff..ff2..f2f.................2fffffff........
    ................fff.........4......................................fff.......fff..........fff2..ff22.....fffff2f.2f2ff.ff2..f2fff...............22222222........
    ..................................................................ffff.......fff..........fff2..ff22.....fffff2f2.f2ff.ff2..ff2fff..................fff2........
    ..................................................................ffff....................fff2..ff22.......fff2.2.ff2f.ff2...f222ffffffff............ff2........
    .................................................................fffff.......................2..fff2..........222....2.ff2....ff222222222ff..........ff2........
    .................................................................ffff.ffffffff..................fff2..................2.........ffffffffffff......fffff2........
    .................................................................fffffffffffff........................................22...............ffffff...fffffff2........
    ....................................................................ffffffffff...........................................................ffffffffffff22f........
    ....................................................................ffff..ffff...........................................................fffffffffff22..........
    ....................................................................ffff..ffff.............................................................ffffff222............
    ....................................................................ffffffffff................................................................222...............
    ....................................................................fffffffff...................................................................................
    .....................................................................fffffffffff................................................................................
    ..................................................88...................fffffffff................................................................................
    ..................................................8...................fffffffffff...............................................................................
    ..................................................8..................ffffff..ffff...............................................................................
    ................................................ff8................fffffff...ffff...............................................................................
    ................................................ff8...............ffffff......fff..........fff..................................................................
    ................................................f8f..............ffffff.....fffff..........fff..................................................................
    ............................8fffff..............f8f..............fffff......fffff..........ff8..................................................................
    ............................88fffff.............f8f..............fffff..fffffffff...............................................................................
    .............................8fffffff..........f88f................ffffffffffff.................................................................................
    .............................88fffffff.........f8ff................fffffffffff..................................................................................
    .............................88f.ffffff........f8f.......f88.......fffffff......................................................................................
    .............................8f8..ffffff.......8ff.......fff....................fff.8.....fff8..................f88888888ff.....................................
    .............................8ff8...ffff.......8ff.......fff....................fff88.....fff8.................888fffffffff.....................................
    .............................8ff8....fffff....f8ff...............fff8f..........fff8......fff8....ffffff88....8.fffffffffff.....................................
    .............................8ff.8...fffff....f8ff...............fff8ff.........ff88......fff8...ffff888f8f...888ff.............................................
    .............................8ff.8....fffff...8ff.......fff......ff888888.......ff8.......fff8...fff88ff88f.....f888fff.........................................
    .............................8ff..8....fffff..8ff.......fff......fff8ffff888...fff8.......fff8..ffff8..f88f.....fff888ffff......................................
    .............................8fff..8....ffff.f8ff.......fff......fff8fffff.88..fff8.......fff8..ffff8..8ff8......fffff888f......................................
    .............................8fff..8....ffffff8ff......88ff......fff8.fffff.888fff8.......fff8..fff.8..8ff8.........fffff88f....................................
    ..............................8ff...88...ffff8ff........8ff......fff8..fffff..88ff8.......fff8..ffff8.f8fff8...........ffff8888.................................
    ..............................8ff....8888ffff8ff.......f8ff......ffff8.ffffff..8f8........fff8..ffff8f88fff88...fff.....fffff.8.................................
    ..............................8ff.......888ff8ff.......f8ff......ffff8..fffff.ff88........fff8..ffff888fffff88f.ffff.....ffff.8.................................
    ..............................8ff.........f8f8ff.......f8ff......ffff8...ffffffff8........fff8.....fffff.ffff88fff8ff....ffff8..................................
    ..............................8ff.........ff88ff.......f8f.......ffff8....fffffff.........fff8............ffff888f888ffffff888..................................
    ..............................8ff..........f88ff.......f8f.......ffff8.....ffffff.........fff8...............fff.88f88ffff8ff...................................
    ..............................8ff..........ffff........f8f.......fff.......ffffff.........ff8.....................fff88888f.....................................
    ..............................8ff..........ffff........f8f..................fffff.........ff8...................................................................
    ..............................fff...........fff.........8....................ffff.........ff8...................................................................
    ..........................................................................................ff8...................................................................
    ..........................................................................................f8f...................................................................
    ...............................................................................fff.......ff8f...................................................................
    ..............................................................................8fff.....ffff8f...................................................................
    ..............................................................................8fff..ffffff8ff...................................................................
    ..............................................................................8ffffffffff88f....................................................................
    ..............................................................................8ffffffff88.......................................................................
    ..............................................................................8fff88888.........................................................................
    ..............................................................................8888..............................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    `)
scene.setBackgroundColor(7)
music.baDing.play()
game.showLongText("Press A to Start. Collect pizza, don't get hit by ninjas.", DialogLayout.Bottom)
scene.setBackgroundImage(img`
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    `)
scene.setBackgroundColor(7)
Pirate = sprites.create(img`
    . . . . . . f f f f . . . . . . 
    . b . . . f 1 f f 1 f . . . b . 
    b . . . f f f 1 1 f f f . . . b 
    b . . f f f 1 f f 1 f f f . . b 
    b . . f 5 f 5 f f 5 f 5 f . . b 
    b . . . . d d 8 d d 8 . . . . b 
    b . . . . e d d d d d . . . . b 
    b . . . 2 e e d d d e 2 . . . b 
    9 9 . 2 2 2 e e e e 2 2 2 . 9 9 
    9 2 2 2 . 2 2 5 e 2 2 . 2 2 2 9 
    . 2 2 . . 2 2 2 5 2 2 . . 2 2 . 
    . . . . . 2 2 5 2 2 6 . . . . . 
    . . . . . 6 6 6 6 6 6 . . . . . 
    . . . . . . 4 6 6 4 . . . . . . 
    . . . . . . 4 . . 4 . . . . . . 
    . . . . f f f . . f f f . . . . 
    `, SpriteKind.Player)
Pirate.startEffect(effects.warmRadial)
controller.moveSprite(Pirate)
Pirate.setFlag(SpriteFlag.StayInScreen, true)
pizza = sprites.create(img`
    . . . . . . b b b b . . . . . . 
    . . . . . . b 4 4 4 b . . . . . 
    . . . . . . b b 4 4 4 b . . . . 
    . . . . . b 4 b b b 4 4 b . . . 
    . . . . b d 5 5 5 4 b 4 4 b . . 
    . . . . b 3 2 3 5 5 4 e 4 4 b . 
    . . . b d 2 2 2 5 7 5 4 e 4 4 e 
    . . . b 5 3 2 3 5 5 5 5 e e e e 
    . . b d 7 5 5 5 3 2 3 5 5 e e e 
    . . b 5 5 5 5 5 2 2 2 5 5 d e e 
    . b 3 2 3 5 7 5 3 2 3 5 d d e 4 
    . b 2 2 2 5 5 5 5 5 5 d d e 4 . 
    b d 3 2 d 5 5 5 d d d 4 4 . . . 
    b 5 5 5 5 d d 4 4 4 4 . . . . . 
    4 d d d 4 4 4 . . . . . . . . . 
    4 4 4 4 . . . . . . . . . . . . 
    `, SpriteKind.Food)
info.setScore(0)
level = 1
newLevel()
forever(function () {
    if (level == 1) {
        pauselength = 2500
    } else if (level == 2) {
        pauselength = 2300
    } else if (level == 3) {
        pauselength = 2000
    } else if (level == 4) {
        pauselength = 1800
    } else if (level == 5) {
        pauselength = 1600
    } else if (level == 6) {
        pauselength = 1400
        projectile.startEffect(effects.trail)
    } else if (level == 7) {
        pauselength = 1000
        projectile.startEffect(effects.spray)
    } else if (level == 8) {
        pauselength = 800
        projectile.startEffect(effects.fountain)
    } else if (level == 9) {
        pauselength = 400
        projectile.startEffect(effects.hearts)
    } else if (level == 10) {
        pauselength = 300
        projectile.startEffect(effects.fire)
    } else if (level > 10) {
        game.over(true, effects.confetti)
    }
    projectile = sprites.createProjectileFromSide(img`
        . . . . f f f f f . . . 9 9 . . 
        . . . f f b b b b f . . . 9 9 . 
        . . . f b b f f f f f . . 9 9 . 
        . . . f b b f 2 d 2 f . . 9 9 . 
        . . . f b b f f f f f . . 9 9 . 
        . . . f f b b b b f . . . 9 9 . 
        . . . . . f f f f . f . . 9 9 . 
        . . . . f f f b b f b f f 6 6 . 
        . . . f b b b b b b f f 6 6 . . 
        . . . f b f b b b f f . . . . . 
        . . . f b f b b b f . . . . . . 
        . . . f f f b b b f . . . . . . 
        . . . . . f b f b f . . . . . . 
        . . . . . f b f b f . . . . . . 
        . . . . . f b f b f . . . . . . 
        . . . . . f f f f f . . . . . . 
        `, 0, 0)
    randomcorner = randint(1, 4)
    if (randomcorner == 1) {
        projectile.setPosition(0, 0)
        projectile.setVelocity(randint(0, 120), randint(0, 120))
    } else if (randomcorner == 2) {
        projectile.setPosition(160, 0)
        projectile.setVelocity(randint(-100, 0), randint(100, 0))
    } else if (randomcorner == 3) {
        projectile.setPosition(160, 120)
        projectile.setVelocity(randint(0, -100), randint(0, -100))
    } else if (randomcorner == 4) {
        projectile.setPosition(0, 120)
        projectile.setVelocity(randint(0, 100), randint(0, -100))
    }
    pause(pauselength)
})
